# 汪汪☆词语魔法净化器！

**版本号汪！** 1.4.0
**作者大大爪印** enixi 🐾

## 我是做什么的呀？汪！

主人，这个小插件就像一个魔法小护符，能帮您的AI小助手（就是那个会和您聊天的机器人啦）的 **LLM (大语言模型) 回复** 变得更干净、更讨人喜欢哦！它有两种超——厉害的魔法：

1.  **咻咻隐身魔法 ✨**：如果主人不希望AI小助手的LLM回复说某些词、某些符号或者某些烦人的口头禅，只要把它们告诉这个魔法，它们就会"咻~"的一下从小助手的话里消失不见！就像它们从来没出现过一样！
    *   **举个例子**：如果AI小助手说："今天天气真不错呀，喵～"，主人不希望它说"喵～"。只要把"喵～"加到"咻咻隐身"的小本本里，小助手再说这句话就会变成："今天天气真不错呀"。"喵～"就不见啦！

2.  **汪汪禁止령 🚫**：要是AI小助手的LLM回复说了某些主人特别讨厌的词，这个魔法就会立刻发动！然后呢，小助手要么就乖乖闭嘴（不发消息或者发一条空消息），要么就会说一句主人事先教给它的话，比如"呜...这个话题不可以啦！"
    *   **举个例子**：如果主人设置了"汪汪禁止"词是"坏蛋"，并且设置了禁止后回复"不可以骂人哦！"。当AI小助手想说："你是个坏蛋！"的时候，我就会马上发现，然后让小助手改成说："不可以骂人哦！"。如果主人没有设置禁止后回复的话，那小助手可能就什么都不说了。

有了我，主人就可以调教出更乖、更懂礼貌的AI小助手啦！

## 我的魔法都有哪些呢？

*   我有两个秘密小本本哦：
    *   一个本本 (`delete_words_list`) 专门记下那些需要"咻咻隐身"的词语和符号！
    *   另一个本本 (`block_words_list`) 专门记下那些一旦出现，就需要发动"汪汪禁止령"的词语和符号！
*   主人可以决定，在施法的时候，要不要区分英文字母的大小写 (`delete_case_sensitive`, `block_case_sensitive`)。比如，是只对 "Word" 施法，还是对 "word" 和 "Word" 都施法呢？主人说了算！
*   还可以选择，是不是只有当一个词孤零零地出现时，魔法才生效 (`delete_match_whole_word`, `block_match_whole_word`)。
    *   **汪汪小提示**：对于中文、日文、韩文的单个字，或者像"：：：："这样一长串符号，最好把"仅匹配整个单词"这个选项关掉哦（选"否"），这样我才能更准确地找到它们，把它们变——不见！或者汪汪禁止！
*   如果发动了"汪汪禁止령"，主人可以自定义小助手应该回复什么话 (`block_response_message`)。如果主人没教它说什么，那它就会选择沉默是金，不发出声音~

## 怎么教我用魔法呀~ (配置和命令指南汪！)

主人有两种方法可以教我施法哦！

**方法一：通过AstrBot的网页管理界面配置 (推荐给喜欢图形界面的主人)**

主人可以在AstrBot的网页管理界面里找到我（我的名字现在是"delete_and_block_filter"或者"词语删除与拦截过滤器"哦），然后在那里教我怎么施法！大部分基础设定都在这里完成。

这些是我的魔法开关和咒语小本本的设置项：

*   **【咻咻隐身术】总开关 (`enable_delete_filter`)**: 开关这个魔法。
*   **【咻咻隐身术】要变没的词语小本本 (`delete_words_list`)**: 写下要删除的词。
*   **【咻咻隐身术】分不分大小写呀？ (`delete_case_sensitive`)**: 删除时是否区分字母大小写。
*   **【咻咻隐身术】是不是整个词才算数？ (`delete_match_whole_word`)**: 是否只删除完整匹配的词。
    *   **汪汪小提示**：对于中文、日文、韩文的单个字，或者像"：：：："这样一长串符号，最好把这个选项关掉哦（选"否"），这样我才能更准确地找到它们！

*   **【汪汪禁止령】总开关 (`enable_block_filter`)**: 开关这个魔法。
*   **【汪汪禁止령】触发禁止的词语小本本 (`block_words_list`)**: 写下触发拦截的词。
*   **【汪汪禁止령】分不分大小写呀？ (`block_case_sensitive`)**: 拦截时是否区分字母大小写。
*   **【汪汪禁止령】是不是整个词才算数？ (`block_match_whole_word`)**: 是否只拦截完整匹配的词。
    *   **汪汪小提示**: 同上，处理单个中文字或符号串时，建议关掉（选"否"）！
*   **【汪汪禁止령】自定义禁止回复 (`block_response_message`)**: 设置拦截后机器人回复的固定内容。留空则机器人不回复或回复空消息。

**方法二：通过聊天命令管理 (推荐给喜欢快速操作的管理员主人)**

除了网页配置，管理员主人还可以直接在聊天框里对我下达命令，来快速管理我的两个小本本（删除列表和拦截列表）和开关我的魔法哦！

以下是管理员专属的魔法咒语 (聊天命令)：

*   `/过滤配置` 或 `/词语过滤配置`
    *   **作用**：查看当前所有过滤器的设定状态，包括两个小本本里的词、大小写敏感、是否匹配整个词以及各个魔法的开关状态。
    *   **例子**：主人在聊天里输入 `/过滤配置`，我就会把现在所有的设置情况都告诉主人。

*   **咻咻隐身魔法管理 ✨**
    *   `/加删除词 <词语>`
        *   **作用**：把一个词语或符号添加到"咻咻隐身"的小本本里。
        *   **例子**：输入 `/加删除词 喵喵`，以后机器人回复里所有的"喵喵"都会被删除。
    *   `/减删除词 <词语>`
        *   **作用**：从"咻咻隐身"的小本本里移除一个词语或符号。
        *   **例子**：输入 `/减删除词 喵喵`，之前添加的"喵喵"就不会再被删除了。
    *   `/切换删除`
        *   **作用**：打开或关闭"咻咻隐身"魔法。如果本来是开的，就关掉；如果本来是关的，就打开。
        *   **例子**：输入 `/切换删除`，如果删除功能之前是关闭的，现在就会开启。

*   **汪汪禁止령管理 🚫**
    *   `/加拦截词 <词语>`
        *   **作用**：把一个词语或符号添加到"汪汪禁止"的小本本里。
        *   **例子**：输入 `/加拦截词 笨蛋`，以后机器人回复里只要出现"笨蛋"，就会触发禁止령。
    *   `/减拦截词 <词语>`
        *   **作用**：从"汪汪禁止"的小本本里移除一个词语或符号。
        *   **例子**：输入 `/减拦截词 笨蛋`，之前添加的"笨蛋"就不会再触发禁止령了。
    *   `/切换拦截`
        *   **作用**：打开或关闭"汪汪禁止"魔法。
        *   **例子**：输入 `/切换拦截`，如果拦截功能之前是关闭的，现在就会开启。

**重要汪**：使用聊天命令修改配置后，我会自动保存并重新加载设定，所以会立刻生效哦！

## 主人请听好~ (使用小贴士汪！)

1.  **保存魔法设定 (网页配置)**：主人如果在网页上修改我的魔法设定，一定要记得点那个"保存"或者"保存并关闭"的按钮哦！不然我可记不住新的咒语！有时候，为了让我彻底学会新魔法，可能需要重启一下AstrBot整个程序。**（聊天命令修改的设定会自动保存，不需要额外操作！）**
2.  **禁止魔法优先权**：汪汪！"汪汪禁止령"比"咻咻隐身术"更厉害！如果一句话同时触发了两种魔法，我会先发动"汪汪禁止령"，让小助手闭嘴或者说特定的话，然后"咻咻隐身术"就不会再对这句话起作用了。
3.  **我怎么认词的**：主人在小本本上写的词，或者通过命令加进来的词，我会乖乖地按照字面意思去找。就算词里面有看起来很奇怪的符号，我也会把它们当成普通的字来处理。我内部会把它们变成类似 `词语1|词语2|符号串` 这样的咒语来寻找目标。

## 呜...魔法失灵了怎么办QAQ？ (故障排除指南)

*   **魔法没反应耶**：
    *   先通过 `/过滤配置` 命令或者去网页看看，对应魔法的总开关（比如"【咻咻隐身术】总开关"或聊天命令里的 `切换删除` 状态）是不是打开了呀？
    *   再看看，那两个秘密小本本（`delete_words_list` 和 `block_words_list`）里面，是不是正确地写上了想处理的词语呢？是不是不小心多了空格或者写错了字？
    *   "是不是整个词才算数？"和"分不分大小写呀？"这两个开关的状态对不对？**特别是处理单个的、可爱的中文字，或者像"：：：："这样的符号串时，"是不是整个词才算数？"最好是关掉的（选"否"），不然我可能会笨笨地找不到它们！**
    *   可以偷偷看一下AstrBot的运行日志，里面可能会有我 `[delete_and_block_filter]` 留下的线索，告诉我有没有乖乖加载，或者有没有发现什么问题，比如有没有报错说找不到配置文件或者正则表达式写错了。
*   **小本本里的词保存不上 (主要针对旧版或网页配置问题)**：如果在网页上往小本本里添加了词语，保存并重启后发现它们不见了，呜...这可能是个小BUG。主人可以尝试直接编辑我的配置文件（一般在 `data/config/delete_and_block_filter_config.json` — 具体路径请根据您AstrBot版本存放插件配置的位置确认，但文件名会包含 `delete_and_block_filter`），确保里面的词语列表是像这样 `["词语1", "：：：：", "另一个词"]` 的格式。**不过，通过聊天命令添加的词语一般会更可靠地保存下来哦！**

---

希望能帮助主人更好地调教AI小助手，让它成为最贴心、最懂事的小可爱！汪~ 💖
